@model IEnumerable<DrivingSclApp.Areas.Schools.Data.SchoolVM>

<style>
    .buttons {
        text-align: center;
    }

    personGrid {
        width: 1400px;
    }

    sclName {
        visibility: hidden;
    }

    .search-bars {
        text-align: center;
    }
</style>

<!-- Add Trainer Buttons and Hidden Boxes -->
<div class="container">
    <!-- Hidden TextBoxes -->
    <div id="save-container" class="row hidden">
        <div class="col-sm-3">
            <div class="editor-label">
                @Html.Label("اسم المدرسة", htmlAttributes: new { @class = "control-label" })
            </div>
            <div class="editor-field">
                @(Html.Kendo().NumericTextBox()
                    .Name("TrainSclNb").Enable(false)
                    .Value(Model.Select(x => x.NB).FirstOrDefault())
                    .HtmlAttributes(new { placeholder = "ملاحظة", style = "width: 100%" })
                    )
            </div>
        </div>
        <div class="col-sm-3">
            <div class="editor-label">
                @Html.Label("نوع المالك", htmlAttributes: new { @class = "control-label" })
            </div>
            <div class="editor-field">
                @(Html.Kendo().TextBox()
                    .Name("TrainPrsNb").Enable(false)
                    .HtmlAttributes(new { placeholder = "أدخل اسم المدرسة", required = "required", validationmessage = "*", @class = "form-control", style = "width: 100%" })
                    )
            </div>
        </div>
    </div>
    <!-- The information that the user will fill -->
    <div class="container-fluid">

    </div>
    <!-- Buttons -->
    <div class="container-fluid">
        <div class="row">
            <div class="row" style="margin-top:20px"></div>
            <div class="buttons">
                <div class="k-edit-buttons k-state-default">
                    @(Html.Kendo().Button()
                    .Name("btnAddTrainer")
                    .Content("إضافة مدرب")
                    .HtmlAttributes(new { type = "button", @class = "btn btn-primary", style = "height:35px;width:auto;text-align:center;" })
                    )
                </div>
            </div>
            <div class="row" style="margin-top:20px"></div>
        </div>
    </div>
</div>

<!-- Trainer Table -->
<div class="container-fluid">
    <div id="IdivForm">
        <div calss="k_rtl">
            @(Html.Kendo().Grid<DrivingSclApp.Areas.Schools.Data.SchoolTrainerVM>()
            .Name("TrainerGrid")
            .Columns(columns =>
            {
                columns.Command(command => { command.Custom("حذف").Click("DestroyTrainer").HtmlAttributes(new { @class = "btn btn-danger"}); }).Title("العمليات").HtmlAttributes(new { style = "width:auto;" });
                columns.Bound(c => c.NB).Visible(false);
                columns.Bound(c => c.PRS_NB).Visible(false);
                columns.Bound(c => c.SCL_NB).Visible(false);
                columns.Bound(c => c.TYP_NB).Visible(false);
                columns.Bound(c => c.PRS_NAME).HtmlAttributes(new { style = "width:auto;" });
                columns.Bound(c => c.SCL_NAME).HtmlAttributes(new { style = "width:auto;" });
                columns.Bound(c => c.TYP_NAME).HtmlAttributes(new { style = "width:auto;" });
                columns.Bound(c => c.DIPLOM).HtmlAttributes(new { style = "width:auto;" });
                columns.Bound(c => c.LICENSENO).HtmlAttributes(new { style = "width:auto;" });
                columns.Bound(c => c.LICENSEDATE).ClientTemplate("#= kendo.toString(kendo.parseDate(LICENSEDATE), 'yyyy/MM/dd') #").HtmlAttributes(new { style = "width:auto;" });
                columns.Bound(c => c.LICENSEFROM).HtmlAttributes(new { style = "width:auto;" });
            })
            .Scrollable()
            .HtmlAttributes(new { style = "height: auto;" })
            .DataSource(dataSource => dataSource
            .Ajax()
            .Events(events => events.Error("error_handler").Sync("sync_handler").RequestEnd("OnRequestEnd"))
            .PageSize(15)
            .Model(model => model.Id(p => p.PRS_NB))
            .Read(read => read.Action("TrainersBySclNb", "SchoolTrainer", new { id = ViewData["ID"] }))
            .Destroy(destroy => destroy.Action("Destroy", "SchoolTrainer")))
            .Resizable(resize => resize
            .Columns(true)
            )
            .Pageable(pageable =>
            {
                pageable.Refresh(true);
                pageable.PageSizes(true);
            })
        )
        </div>
    </div>
</div>

<!-- Add Trainer -->
<div>
    <div class="k-rtl">
        @(Html.Kendo().Window().Name("AddTrainer")
        .Title("إضافة مدرب")
        .Visible(false)
        .Modal(true)
        .Content(@<text>
            <div style="width:100%;" id="fieldlist">
                <form id="Addform">
                    <div id="save-trainer-container">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="editor-label">
                                        @Html.Label("المدرب", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TrainerName")
                                            .HtmlAttributes(new { placeholder = "اختر المدرب", required = "required", validationmessage = "*", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="editor-label">
                                        @Html.Label("المدرسة", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TrainSclName")
                                            .Value(Model.Select(x => x.SCLNAME).FirstOrDefault())
                                            .HtmlAttributes(new { placeholder = "المدرسة", required = "required", validationmessage = "*", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="editor-label">
                                        @Html.Label("الإختصاص", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().DropDownList()
                                        .OptionLabel("اختر الإختصاص")
                                        .Name("TrainTypName")
                                        .DataTextField("Name")
                                        .DataValueField("Id").HtmlAttributes(new { required = "required", validationmessage = "*"})
                                        .DataSource(source =>
                                        {
                                            source.Read(read =>
                                            {
                                                read.Action("GetTrainerType", "Codes", new { area = "Indexes" });
                                            });
                                        })
                                        .HtmlAttributes(new { style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="editor-label">
                                        @Html.Label("رفم إجازة التدريب", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().NumericTextBox()
                                            .Name("TrainLicenseNo")
                                            .HtmlAttributes(new { placeholder = "رقم الإجازة", required = "required", validationmessage = "*", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="editor-label">
                                        @Html.Label("تاريخ إجازة التدريب", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().DatePicker()
                                            .Name("TrainLicenseDate")
                                            .HtmlAttributes(new { placeholder = "تاريخ الإجازة", required = "required", validationmessage = "*", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="editor-label">
                                        @Html.Label("مصدر إجازة التدريب", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TrainLicenseFrom")
                                            .HtmlAttributes(new { placeholder = "مصدر الإجازة", required = "required", validationmessage = "*", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="editor-label">
                                        @Html.Label("الشهادة العلمية", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TrainDiplom")
                                            .HtmlAttributes(new { placeholder = "الشهادة", required = "required", validationmessage = "*", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" style="margin-top:20px"></div>
                        <div class="k-edit-buttons k-state-default">
                        @(Html.Kendo().Button()
                            .Name("btnTrainerSave")
                            .Content("حفظ")
                            .HtmlAttributes(new { type = "button", @class = "btn btn-primary", style = "height:35px;width:100px;" })
                        )
                        @(Html.Kendo().Button()
                            .Name("btnTrainerReset")
                            .Content("تراجع")
                            .HtmlAttributes(new { type = "button", @class = "btn btn-danger", style = "height:35px;width:100px;" })
                        )
                        </div>
                    </div>
                </form>
            </div>
        </text>)
        .Draggable(true) //Enable dragging of the window
        .Actions(actions => actions.Pin().Minimize().Maximize().Close()).Resizable() //Enable resizing of the window
            .Width(800)     //Set width of the window
            .Height(300)
        )
    </div>
</div>

<!-- search about person -->
<div>
    <div class="k-rtl">
        @(Html.Kendo().Window().Name("TainPersonSearch")
        .Title("بحث عن شخص")
        .Visible(false)
        .Modal(true)
        .Content(@<text>
            <div class="container search-bars">
                <div class="row">
                    <div class="col-md-3">
                        <div class="editor-label">
                            @Html.Label("الرقم الوطني", htmlAttributes: new { @class = "control-label" })
                        </div>
                        <div class="editor-field">
                            @(Html.Kendo().NumericTextBox()
                            .Name("TainPerNatno")
                            .HtmlAttributes(new { placeholder = "أدخل الرقم الوطني", style = "width: 100%; text-align: center;" })
                            )
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="editor-label">
                            @Html.Label("الاسم", htmlAttributes: new { @class = "control-label" })
                        </div>
                        <div class="editor-field">
                            @(Html.Kendo().TextBox()
                            .Name("TainPerFname")
                            .HtmlAttributes(new { placeholder = "أدخل الاسم", @class = "form-control", style = "width: 100%; text-align: center;" })
                            )
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="editor-label">
                            @Html.Label("الكنية", htmlAttributes: new { @class = "control-label" })
                        </div>
                        <div class="editor-field">
                            @(Html.Kendo().TextBox()
                            .Name("TainPerLname")
                            .HtmlAttributes(new { placeholder = "أدخل الكنية", @class = "form-control", style = "width: 100%; text-align: center;" })
                            )
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-3">
                        <div class="editor-label">
                            @Html.Label("الاب", htmlAttributes: new { @class = "control-label" })
                        </div>
                        <div class="editor-field">
                            @(Html.Kendo().TextBox()
                            .Name("TainPerFather")
                            .HtmlAttributes(new { placeholder = "أدخل اسم الاب", @class = "form-control", style = "width: 100%; text-align: center;" })
                            )
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="editor-label">
                            @Html.Label("الام", htmlAttributes: new { @class = "control-label" })
                        </div>
                        <div class="editor-field">
                            @(Html.Kendo().TextBox()
                            .Name("TainPerMother")
                            .HtmlAttributes(new { placeholder = "أدخل اسم الاب", @class = "form-control", style = "width: 100%; text-align: center;" })
                            )
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="editor-label">
                            @Html.Label("الميلاد", htmlAttributes: new { @class = "control-label" })
                        </div>
                        <div class="editor-field">
                            @(Html.Kendo().DatePicker()
                            .Name("TainPerBday")
                            .HtmlAttributes(new { placeholder = "أدخل الميلاد", @class = "form-control", style = "width: 100%; text-align: center;" })
                            )
                        </div>
                    </div>
                </div>
                <div class="row" style="margin-top:20px"></div>
                <div class="row">
                    <div class="k_rtl">
                        @(Html.Kendo().Button()
                        .Name("btnTainPersonSearch")
                        .Content("بحث")
                        .HtmlAttributes(new { type = "button", @class = "btn btn-primary", style = "height:35px;width:100px;text-align:center;" })
                        )
                        @(Html.Kendo().Button()
                        .Name("btnTainPersonNew")
                        .Content("جديد")
                        .HtmlAttributes(new { type = "button", @class = "btn btn-primary", style = "height:35px;width:100px;text-align:center;" })
                        )
                        @(Html.Kendo().Button()
                        .Name("btnTainPersonSearchReset")
                        .Content("تراجع")
                        .HtmlAttributes(new { type = "button", @class = "btn btn-danger", style = "height:35px;width:100px;" })
                        )
                    </div>
                </div>
                <div class="row" style="margin-top:20px"></div>
            </div>
            <div class="container-fluid">
                <div id="IdivForm">
                    <div calss="k_rtl">
                        @(Html.Kendo().Grid<DrivingSclApp.Areas.Indexes.Data.PersonVM>()
                        .Name("TainPersonGrid")
                        .Columns(columns =>
                        {
                            columns.Command(command => { command.Custom("اختيار").Click("ChooseTrainPerson").HtmlAttributes(new { @class = "btn btn-primary" }); }).Title("العمليات").HtmlAttributes(new { style = "width:auto;" });
                            columns.Bound(c => c.NB).Visible(false);
                            columns.Bound(c => c.NATNO).HtmlAttributes(new { style = "width:auto;" });
                            columns.Bound(c => c.FNAME).HtmlAttributes(new { style = "width:auto;" });
                            columns.Bound(c => c.LNAME).HtmlAttributes(new { style = "width:auto;" });
                            columns.Bound(c => c.FATHER).HtmlAttributes(new { style = "width:auto;" });
                            columns.Bound(c => c.MOTHER).HtmlAttributes(new { style = "width:auto;" });
                            columns.Bound(c => c.CIVILLOC).HtmlAttributes(new { style = "width:auto;" });
                            columns.Bound(c => c.ACTADDRESS).Visible(false);
                            columns.Bound(c => c.ADDRESS).Visible(false);
                            columns.Bound(c => c.PHONE).Visible(false);
                            columns.Bound(c => c.MOBILE).Visible(false);
                            columns.Bound(c => c.BDATED).Visible(false);
                            columns.Bound(c => c.BDATEM).Visible(false);
                            columns.Bound(c => c.BDATEY).Visible(false);
                            columns.Bound(c => c.BDATE).ClientTemplate("#= kendo.toString(kendo.parseDate(BDATE), 'yyyy/MM/dd') #").HtmlAttributes(new { style = "width:auto;" });
                            columns.Bound(c => c.IDCARDNO).Visible(false);
                            columns.Bound(c => c.IDCARDDAT).Visible(false);
                            columns.Bound(c => c.BPLACE).Visible(false);
                            columns.Bound(c => c.ALAMANA).Visible(false);
                            columns.Bound(c => c.SEX_string).HtmlAttributes(new { style = "width:auto;" });
                            columns.Bound(c => c.SEX).Visible(false);
                            columns.Bound(c => c.TYP).Visible(false);
                            columns.Bound(c => c.NAT).Visible(false);
                            columns.Bound(c => c.NationName).HtmlAttributes(new { style = "width:auto;" });
                            columns.Bound(c => c.PerType).HtmlAttributes(new { style = "width:auto;" });

                        })
                        .HtmlAttributes(new { style = "height: auto;" })
                        .Sortable()
                        .Filterable()
                        .DataSource(dataSource => dataSource
                        .Ajax()
                        .Events(events => events.Error("error_handler").Sync("sync_handler").RequestEnd("OnRequestEnd"))
                        .PageSize(15)
                        .Model(model => model.Id(p => p.NB))
                        .Read(read => read.Action("PersonFilter", "SchoolOwner")))
                        .Resizable(resize => resize
                        .Columns(true)
                        )
                        .Pageable(pageable =>
                        {
                            pageable.Refresh(true);
                            pageable.PageSizes(true);
                        })
                        )
                    </div>
                </div>
            </div>
        </text>)
        .Draggable(true) //Enable dragging of the window
        .Actions(actions => actions.Pin().Minimize().Maximize().Close()).Resizable() //Enable resizing of the window
            .Width(1500)     //Set width of the window
            .Height(600)
        )
    </div>
</div>

<!-- Add Person -->
<div id="IdivForm">
    <div class="k-rtl">
        @(Html.Kendo().Window().Name("AddTainPerson")
        .Title("إضافة شخص")
        .Visible(false)
        .Modal(true)
        .Content(@<text>
            <div style="width:100%;" id="fieldlist">
                <form id="Addform">
                    <div id="save-person-container">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="editor-label">
                                        @Html.Label("الرقم الوطني", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().NumericTextBox()
                                            .Name("TaintxtNatno")
                                            .HtmlAttributes(new { placeholder = "أدخل الرقم الوطني", required = "required", validationmessage = "*", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="editor-label">
                                        @Html.Label("الاسم", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TaintxtFname")
                                            .HtmlAttributes(new { placeholder = "أدخل الاسم", required = "required", validationmessage = "*", @class = "form-control", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="editor-label">
                                        @Html.Label("الكنية", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TaintxtLname")
                                            .HtmlAttributes(new { placeholder = "أدخل الكنية", required = "required", validationmessage = "*", @class = "form-control", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("اسم الاب", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TaintxtFather")
                                            .HtmlAttributes(new { placeholder = "أدخل اسم الاب", required = "required", validationmessage = "*", @class = "form-control", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("الام", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TaintxtMother")
                                            .HtmlAttributes(new { placeholder = "أدخل اسم الام", required = "required", validationmessage = "*", @class = "form-control", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("القيد المدني", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TaintxtCivilloc")
                                            .HtmlAttributes(new { placeholder = "أدخل القيد المدني", required = "required", validationmessage = "*", @class = "form-control", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("العنوان الحالي", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TaintxtActaddress")
                                            .HtmlAttributes(new { placeholder = "أدخل العنوان الحالي", @class = "form-control", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("العنوان", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TaintxtPrsAddress")
                                            .HtmlAttributes(new { placeholder = "أدخل العنوان", @class = "form-control", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("الهاتف", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().NumericTextBox()
                                            .Name("TaintxtPhone")
                                            .HtmlAttributes(new { placeholder = "أدخل الهاتف", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("المحمول", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().NumericTextBox()
                                            .Name("TaintxtPrsMobile")
                                            .HtmlAttributes(new { placeholder = "أدخل المحمول",style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("رقم الهوية", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().NumericTextBox()
                                            .Name("TaintxtIdcardno")
                                            .HtmlAttributes(new { placeholder = "أدخل رقم الهوية", required = "required", validationmessage = "*", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("تاريخ الهوية", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().DatePicker()
                                            .Name("TaindpIdcarddat")
                                            .Value(DateTime.Today)
                                            .HtmlAttributes(new { placeholder = "أدخل تاريخ الهوية", required = "required", validationmessage = "*", @class = "form-control", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("الميلاد", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().DatePicker()
                                            .Name("TaindpBdate")
                                            .Value(DateTime.Today)
                                            .HtmlAttributes(new { placeholder = "أدخل الميلاد", required = "required", validationmessage = "*", @class = "form-control", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("مكان الميلاد", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TaintxtBplace")
                                            .HtmlAttributes(new { placeholder = "أدخل مكان الميلاد", required = "required", validationmessage = "*", @class = "form-control", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("الأمانة", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().TextBox()
                                            .Name("TaintxtAlamana")
                                            .HtmlAttributes(new { placeholder = "أدخل لأمانة", required = "required", validationmessage = "*", @class = "form-control", style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("الجنس", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().DropDownList()
                                        .OptionLabel("اختر الجنس")
                                        .Name("TainddlSex")
                                        .DataTextField("Text")
                                        .DataValueField("Value").HtmlAttributes(new { required = "required", validationmessage = "*"})
                                        .DataSource(source =>
                                        {
                                            source.Read(read =>
                                            {
                                                read.Action("GetSex", "Codes", new { area = "Indexes" });
                                            });
                                        })
                                        .HtmlAttributes(new { style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("الجنسية :", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().DropDownList()
                                        .OptionLabel("اختر الجنسية")
                                        .Name("TainddlNation")
                                        .DataTextField("Name")
                                        .DataValueField("Id").HtmlAttributes(new { required = "required", validationmessage = "*" })
                                        .DataSource(source =>
                                        {
                                            source.Read(read =>
                                            {
                                                read.Action("GetNation", "Codes", new { area = "Indexes" });
                                            });
                                        })
                                        .HtmlAttributes(new { style = "width: 100%; text-align:center;" })
                                        )
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="editor-label">
                                        @Html.Label("نوع الشخص :", htmlAttributes: new { @class = "control-label" })
                                    </div>
                                    <div class="editor-field">
                                        @(Html.Kendo().DropDownList()
                                        .OptionLabel("اختر نوع الشخص")
                                        .Name("TainddlPertype")
                                        .DataTextField("Name")
                                        .DataValueField("Id").HtmlAttributes(new { required = "required", validationmessage = "*" })
                                        .DataSource(source =>
                                        {
                                            source.Read(read =>
                                            {
                                                read.Action("GetPertype", "Codes", new { area = "Indexes" });
                                            });
                                        })
                                        .HtmlAttributes(new { style = "width: 100%" })
                                        )
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" style="margin-top:20px"></div>
                        <div class="k-edit-buttons k-state-default">
                        @(Html.Kendo().Button()
                            .Name("btnTainPersonSave")
                            .Content("حفظ")
                            .HtmlAttributes(new { type = "button", @class = "btn btn-primary", style = "height:35px;width:100px;" })
                        .Events(e => e.Click("SaveNewOwnerPerson"))
                        )
                        @(Html.Kendo().Button()
                            .Name("btnTainPersonReset")
                            .Content("تراجع")
                            .HtmlAttributes(new { type = "button", @class = "btn btn-danger", style = "height:35px;width:100px;" })
                        )
                        </div>
                    </div>
                </form>
            </div>
        </text>)
        .Draggable(true) //Enable dragging of the window
        .Actions(actions => actions.Pin().Minimize().Maximize().Close()).Resizable() //Enable resizing of the window
            .Width(800)     //Set width of the window
            .Height(500)
        )
    </div>
</div>

<script>
    $("#btnAddTrainer").on('click', function () {
        var wnd = $("#AddTrainer").data("kendoWindow");
        wnd.center().open();
    })

    $("#TrainerName").on('click', function () {
        var wnd = $("#TainPersonSearch").data("kendoWindow");
        wnd.center().open();
    })

    $("#btnTainPersonNew").on('click', function () {
        var wnd = $("#AddTainPerson").data("kendoWindow");
        wnd.center().open();
    })

    $("#btnTrainerReset").on('click', function () {
        $("#TrainerName").val("");
        $("#TrainTypName").data("kendoDropDownList").value(-1);
        $("#TrainLicenseNo").data("kendoNumericTextBox").value(" ");
        $("#TrainLicenseDate").data("kendoDatePicker").value(" ");
        $("#TrainLicenseFrom").val("");
        $("#TrainDiplom").val("");
    })

    $("#btnTainPersonSearchReset").on('click', function () {
        $("#TainPerNatno").data("kendoNumericTextBox").value(" ");
        $("#TainPerFname").val("");
        $("#TainPerLname").val("");
        $("#TainPerFather").val("");
        $("#TainPerMother").val("");
        $("#TainPerBday").data("kendoDatePicker").value(" ");
    })

    $("#btnTainPersonReset").on('click', function () {
        $("#TaintxtNatno").data("kendoNumericTextBox").value(" ");
        $("#TaintxtFname").val("");
        $("#TaintxtLname").val("");
        $("#TaintxtFather").val("");
        $("#TaintxtMother").val("");
        $("#TaintxtCivilloc").val("");
        $("#TaintxtActaddress").val("");
        $("#TaintxtPrsAddress").val("");
        $("#TaintxtPhone").data("kendoNumericTextBox").value(" ");
        $("#TaintxtPrsMobile").data("kendoNumericTextBox").value(" ");
        $("#TaintxtIdcardno").data("kendoNumericTextBox").value(" ");
        $("#TaindpIdcarddat").data("kendoDatePicker").value(" ");
        $("#TaindpBdate").data("kendoDatePicker").value(" ");
        $("#TaintxtBplace").val("");
        $("#TaintxtAlamana").val("");
        $("#TainddlSex").data("kendoDropDownList").value(-1);
        $("#TainddlNation").data("kendoDropDownList").value(-1);
        $("#TainddlPertype").data("kendoDropDownList").value(-1);
    })

    $("#btnTainPersonSave").on('click', function () {
        var personModel = {
            FNAME: $("#TaintxtFname").val(),
            LNAME: $("#TaintxtLname").val(),
            FATHER: $("#TaintxtFather").val(),
            MOTHER: $("#TaintxtMother").val(),
            NATNO: $("#TaintxtNatno").val(),
            CIVILLOC: $("#TaintxtCivilloc").val(),
            ACTADDRESS: $("#TaintxtActaddress").val(),
            ADDRESS: $("#TaintxtPrsAddress").val(),
            PHONE: $("#TaintxtPhone").val(),
            MOBILE: $("#TaintxtPrsMobile").val(),
            BDATED: $("#TaintxtBdated").val(),
            BDATEM: $("#TaintxtBdatem").val(),
            BDATEY: $("#TaintxtBdatey").val(),
            BDATE: $("#TaindpBdate").val(),
            IDCARDNO: $("#TaintxtIdcardno").val(),
            IDCARDDAT: $("#TaindpIdcarddat").val(),
            BPLACE: $("#TaintxtBplace").val(),
            ALAMANA: $("#TaintxtAlamana").val(),
            SEX: $("#TainddlSex").val(),
            NAT: $("#TainddlNation").val(),
            TYP: $("#TainddlPertype").val()
        }
        var model1 = {
            "model": personModel
        }
        $.ajax({
            type: "POST",
            url: '@Url.Action("Create_getPrs", "zPerson", new { area = "Indexes" })',
            data: model1,
            datatype: "json",
            cache: false,
            success: function (response) {
                $("#TrainPrsNb").val(response.NB);
                $("#TrainerName").val(response.FNAME + " " + response.LNAME);
                var wnd1 = $("#AddTainPerson").data("kendoWindow");
                wnd1.close();
                var wnd2 = $("#TainPersonSearch").data("kendoWindow");
                wnd2.close();
            },
        });
    })

    $("#btnTainPersonSearch").on('click', function () {
        var perFname = $("#TainPerFname").val();
        var perLname = $("#TainPerLname").val();
        var perNatno = $("#TainPerNatno").val();
        var perFather = $("#TainPerFather").val();
        var perMother = $("#TainPerMother").val();
        var perBday = $("#TainPerBday").val();

        $.ajax({
            type: "GET",
            url: '@Url.Action("PersonFilter", "SchoolOwner")',
            data: {
                fname: perFname, lname: perLname, natno: perNatno,
                father: perFather, mother: perMother, bday: perBday
            },
            success: function (response) {
                var dataSource = new kendo.data.DataSource({
                    data: response
                });
                var grid = $("#TainPersonGrid").data("kendoGrid");
                grid.setDataSource(dataSource);
            },
        });
    })

    $("#btnTrainerSave").on('click', function () {
        var trainer = {
            PRS_NB: $("#TrainPrsNb").val(),
            SCL_NB: $("#TrainSclNb").val(),
            TYP_NB: $("#TrainTypName").val(),
            DIPLOM: $("#TrainDiplom").val(),
            LICENSENO: $("#TrainLicenseNo").val(),
            LICENSEDATE: $("#TrainLicenseDate").val(),
            LICENSEFROM: $("#TrainLicenseFrom").val()
        }

        var model = { "model": trainer }

        $.ajax({
            type: "POST",
            url: '@Url.Action("Create", "SchoolTrainer")',
            data: model,
            dataType: "JSON",
            success: function (response) {
                $('#success_msg').show();
                $('#error_msg').hide();
                $('#labelIdd').text(response.responseText);
                $("#success_msg").fadeTo(2000, 500).slideUp(500, function () {
                    $("#success_msg").slideUp(500);
                });
                var wnd = $("#AddTrainer").data("kendoWindow");
                wnd.close();
                var grid = $("#TrainerGrid").data("kendoGrid");
                grid.dataSource.read();
            },
        });
    })
</script>



